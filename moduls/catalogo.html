<link rel="stylesheet" type="text/css" href="../css/stylesCatalogo.css" />
<div class="carousel carousel--with-overflow" data-infinite="true" data-autoselect="false" data-manual-select="true" data-manual-multiple-select="false">
  <div class="carousel__slide-wrapper">
      <div class="carousel__slide a active">
          <div class="carousel__slide-inner">
            <img src="../assets/Pagina1.png" width="450">
          </div>
      </div>
      <div class="carousel__slide b">
          <div class="carousel__slide-inner">
            <img src="../assets/Portada.png" width="450">
          </div>
      </div>
      <div class="carousel__slide c">
          <div class="carousel__slide-inner">
            <img src="../assets/Pagina1.png" width="450">
          </div>
      </div>
      <div class="carousel__slide d">
          <div class="carousel__slide-inner">
            <img src="../assets/Pagina2.png" width="450">
          </div>
      </div>
      <div class="carousel__slide e">
          <div class="carousel__slide-inner">
            <img src="../assets/Pagina3.png" width="450">
          </div>
      </div>
      <div class="carousel__slide f">
          <div class="carousel__slide-inner">
            <img src="../assets/Pagina4.png" width="450">
          </div>
      </div>
      <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina5.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina6.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina7.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina8.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina9.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina10.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina11.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina12.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina13.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina14.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina15.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina16.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina17.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina18.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina19.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina20.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina21.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina22.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina23.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina24.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina25.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina26.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina27.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina28.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina29.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina30.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina31.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina32.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina33.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina34.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina35.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina36.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina37.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina38.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina39.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina40.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina41.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina42.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina43.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina44.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina45.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina46.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina47.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina48.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina49.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina50.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina51.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina52.png" width="450">
        </div>
    </div>
    <div class="carousel__slide f">
        <div class="carousel__slide-inner">
          <img src="../assets/Pagina53.png" width="450">
        </div>
    </div>
  </div>
  <div class="carousel__navigation--left">
      <span></span>
  </div>
  <div class="carousel__navigation--right">
      <span></span>
  </div>
</div>
<script>
let carousel, carouselSlideWrapper, allSlides, activeElementIndex, firstElement, lastElement, rightButton, leftButton, slideActive, translateX, autoselectValue, manualSelectValue, manualMultipleSelectValue;

carousel = document.querySelector('.carousel');
carouselSlideWrapper = carousel.querySelector('.carousel__slide-wrapper');
rightButton = carousel.querySelector('.carousel__navigation--right');
leftButton = carousel.querySelector('.carousel__navigation--left');
slideActive = carousel.querySelector('.carousel__slide.active');
translateX = 0;
allSlides = carousel.querySelectorAll('.carousel__slide');
autoselectValue = carousel.dataset.autoselect;
manualSelectValue = carousel.dataset.manualSelect;
manualMultipleSelectValue = carousel.dataset.manualMultipleSelect;

function mobileDevices(){
    if (window.innerWidth <= 768){
        translateX = -100;
    }
}
mobileDevices();



//hacer coincidir active con selected

function autoselect(){
    if (autoselectValue == "true"){
        allSlides.forEach(function(element, index) {
            if (element.classList.contains('active')) {
                element.classList.add('selected');
            }
        })
    }
};

autoselect();



function recalcScena() {
    allSlides = carousel.querySelectorAll('.carousel__slide');
    allSlides.forEach(function(element, index) {
        if (element.classList.contains('active')) {
            activeElementIndex = index;
        }
        firstElement = allSlides[0];
        beforeLastElement = allSlides[allSlides.length - 2];
        lastElement = allSlides[allSlides.length - 1];
    });
}

recalcScena();
relocateSlides();
function relocateSlides() {
    /* mirar si la última pasa a la primera, la primera a la última, o nada...
    dependiendo de si la activa es la segunda o la penúltima */
    if (activeElementIndex === 1) {
        carouselSlideWrapper.insertBefore(lastElement, allSlides[0]);
    } else if (activeElementIndex === 0) {
        carouselSlideWrapper.insertBefore(lastElement, allSlides[0]);
        if (window.innerWidth >= 768) {
            carouselSlideWrapper.insertBefore(beforeLastElement, allSlides[0]);
            translateX = -100;
            moveSlides();
        }
    } else if (activeElementIndex >= (allSlides.length - 2)) {
        carouselSlideWrapper.appendChild(firstElement);
    }
}

//mover las diapositivas
function moveSlides(){
    for(var i = 0; i < allSlides.length; i++){
        allSlides[i].style.transform = "translateX(" + translateX + "%)";
    }
}

rightButton.addEventListener('click', function () {
    /* avanzar el carrusel */
    if (!!carousel.dataset.infinite) {
        slideActive.classList.remove('active');
        slideActive.nextElementSibling.classList.add('active');
        slideActive = slideActive.nextElementSibling;
        recalcScena();
        relocateSlides();
    }

    if (autoselectValue == "true"){
        allSlides.forEach.call(allSlides, function(elem) {
            if(elem !== this) {
                elem.classList.remove('selected');
            }
        })
        autoselect();
    }

    if (activeElementIndex < (allSlides.length - 2)) {
        translateX -= 100;
    }
    

    moveSlides();
});

leftButton.addEventListener('click', function () {
    /* retroceder el carrusel */
    if (!!carousel.dataset.infinite) {
        slideActive.classList.remove('active');
        slideActive.previousElementSibling.classList.add('active');
        slideActive = slideActive.previousElementSibling;
        recalcScena();
        relocateSlides();
    }


    if (autoselectValue == "true"){
        allSlides.forEach.call(allSlides, function(elem) {
            if(elem !== this) {
                elem.classList.remove('selected');
            }
        })
        autoselect();
    }


    if (activeElementIndex > 1) {
        translateX += 100;
    }
    

    moveSlides();
});




allSlides.forEach(function (elem) {
    elem.addEventListener('click', function (e) {
        if (manualMultipleSelectValue == 'true') {
            e.currentTarget.classList.toggle('selected');
        } else if (manualSelectValue == 'true') {
            var selectedSlide = carousel.querySelector('.selected');
            if (!!selectedSlide && selectedSlide !== e.currentTarget) {
                selectedSlide.classList.remove('selected');
                e.currentTarget.classList.add('selected');
            } else {
                e.currentTarget.classList.toggle('selected');
                
            }
        }
    });
});
</script>